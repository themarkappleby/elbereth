(function(e){function t(t){for(var a,c,o=t[0],d=t[1],s=t[2],f=0,l=[];f<o.length;f++)c=o[f],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&l.push(i[c][0]),i[c]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(e[a]=d[a]);p&&p(t);while(l.length)l.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var d=n[o];0!==i[d]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},i={app:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/elbereth/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var p=d;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("6868")},"034f":function(e,t,n){"use strict";var a=n("e6d4"),i=n.n(a);i.a},"04ee":function(e,t,n){},"217a":function(e,t,n){e.exports=n.p+"img/Open.80f2237f.png"},"2be3":function(e,t,n){e.exports=n.p+"img/wood.6ca97484.jpg"},"30ad":function(e,t,n){e.exports=n.p+"img/Staff.23929926.png"},3119:function(e,t,n){e.exports=n.p+"img/InvBow.9de84706.png"},"3d57":function(e,t,n){e.exports=n.p+"img/Descend.3ee5a890.png"},"3dfd":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Map"),n("HUD")],1)},i=[],r=(n("9eec"),n("04ca"),n("fc30"),n("4dc8"),n("8dcc"),n("aa12"),n("4809"),n("e821")),c=n("bd56"),o=n("3777"),d=n("2f62");function s(e){var t=[];e.map.forEach((function(n){(n.safe||n.flipped)&&[[n.x,n.y-1],[n.x,n.y+1],[n.x-1,n.y],[n.x+1,n.y]].forEach((function(n,a){f(n[0],n[1],e.map)||p(n[0],n[1],a,e)&&t.push(n)}))})),t.length&&s(e)}function p(e,t,n,a){if(a.deck.length){var i=a.deck.pop();if(i)return i.x=e,i.y=t,a.map.push(i),!0}return!1}function f(e,t,n){var a=null;return n.forEach((function(n){e===n.x&&t===n.y&&(a=n)})),a}o["a"].use(d["a"]);var l={name:"Entrance",id:"entrance",safe:!0,x:0,y:0,flipped:!1},u={name:"Descend",id:"descend",safe:!0,flipped:!1,x:1,y:0},m={name:"Dragon",id:"dragon",strength:6,type:"boss",flipped:!1,safe:!1,x:0,y:0},g=new d["a"].Store({state:{die:0,floor:1,forceHUD:!1,requiredStrength:0,engaged:null,shopping:!1,map:[l],deckSize:45,deck:[u,m].concat(Object(c["a"])(v("Rat",7,{safe:!1,strength:3})),Object(c["a"])(v("Spider",7,{safe:!1,strength:4})),Object(c["a"])(v("Snake",7,{safe:!1,strength:5})),Object(c["a"])(v("Shop",2,{safe:!0})),Object(c["a"])(v("Wall",12,{safe:!1})),[{name:"Sword",id:"sword",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Staff",id:"staff",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Bow",id:"bow",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Helm",id:"helm",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Gauntlets",id:"gauntlets",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Armor",id:"armor",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Coin",id:"coin",safe:!0,flipped:!1,type:"item",x:0,y:0}]),inv:{sword:{name:"Sword",type:"weapon",inv:!0,flipped:!1,discarded:!1},staff:{name:"Staff",type:"weapon",inv:!0,flipped:!0,discarded:!1},bow:{name:"Bow",type:"weapon",inv:!0,flipped:!0,discarded:!1},armor:{name:"Armor",type:"armor",inv:!0,flipped:!1,discarded:!1},gauntlets:{name:"Gauntlets",type:"armor",inv:!0,flipped:!0,discarded:!1},helm:{name:"Helm",type:"armor",inv:!0,flipped:!0,discarded:!1},coin:{name:"Coin",inv:!0,flipped:!0},key:{name:"Key",inv:!0,flipped:!0}}},mutations:{shuffle:function(e){for(var t=e.deck.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e.deck[n],e.deck[t]];e.deck[t]=a[0],e.deck[n]=a[1]}},explore:function(e){s(e)},setStrength:function(e,t){e.requiredStrength=t.strength},forceHUD:function(e){e.forceHUD=!0},releaseHUD:function(e){e.forceHUD=!1},startShopping:function(e){e.shopping=!0},stopShopping:function(e){e.shopping=!1},engage:function(e,t){e.engaged=t.card},flip:function(e,t){t.card.flipped=!t.card.flipped},roll:function(e){e.die=Math.floor(6*Math.random())+1},increaseDie:function(e){e.die+=1},discard:function(e,t){t.card.discarded=!0}},actions:{descend:function(e){var t=e.commit,n=e.state;n.inv.key.flipped=!0,n.map=n.map.filter((function(e){return"Entrance"!==e.name&&"Descend"!==e.name&&"boss"!==e.type})),n.deck=n.deck.filter((function(e){return"Entrance"!==e.name&&"Descend"!==e.name&&"boss"!==e.type})),n.deck=[].concat(Object(c["a"])(n.deck),Object(c["a"])(n.map)),t("shuffle"),n.deck=[].concat(Object(c["a"])(n.deck.splice(7)),[m,u]),t("shuffle"),n.deck.forEach((function(e){e.x=0,e.y=0,e.flipped=!1})),n.map=[l],n.deckSize=n.deck.length+1,n.floor+=1,window.recenter(),t("explore")}}});function v(e,t,n){for(var a=[],i=1;i<=t;i++)a.push(Object(r["a"])({name:e,flipped:!1,id:"".concat(e,"-").concat(i),safe:!1,x:0,y:0},n));return a}var h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map"},[n("div",{staticClass:"map-inner",style:e.wood},e._l(e.map,(function(t){return n("Card",{key:t.id,attrs:{card:t},on:{click:e.click}})})),1)])},y=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card",class:{flipped:e.flipped,safe:e.safe,inv:e.inv,engaged:e.engaged,boss:e.boss,descend:e.descend},style:e.pos,on:{click:function(t){return e.$emit("click",t,e.card)}}},[n("div",{staticClass:"card-front",style:e.frontImage},[e.card.strength?n("div",{staticClass:"strength"},[e._v(" "+e._s(e.card.strength)+" ")]):e._e()]),n("div",{staticClass:"card-back",style:e.backImage},[e.card.inv?n("span",[e._v(" "+e._s(e.card.name)+" ")]):e._e()])])},w=[];function x(e,t){var n=window.map.width/2,a=window.map.height/2,i=85,r=118,c=5;return{x:n+e*(i+c),y:a+t*(r+c)}}var k=x,S=n("8b13"),_=n.n(S),C=n("3d57"),D=n.n(C),O=n("df1a"),H=n.n(O),j=n("abae"),I=n.n(j),U=n("fea3"),E=n.n(U),M=n("79fe"),q=n.n(M),P=n("d803"),A=n.n(P),B=n("44bb"),G=n.n(B),W=n("f9e9"),$=n.n(W),z=n("30ad"),K=n.n(z),R=n("acd6"),T=n.n(R),J=n("6aef"),F=n.n(J),L=n("f48e"),N=n.n(L),Q=n("551e"),V=n.n(Q),X=n("eaed"),Y=n.n(X),Z=n("217a"),ee=n.n(Z),te=n("4709"),ne=n.n(te),ae=n("65ca"),ie=n.n(ae),re=n("3119"),ce=n.n(re),oe=n("d301"),de=n.n(oe),se=n("7785"),pe=n.n(se),fe=n("8f62"),le=n.n(fe),ue=n("42d2"),me=n.n(ue),ge={Entrance:_.a,Descend:D.a,Shop:H.a,Wall:I.a,Rat:E.a,Spider:q.a,Snake:A.a,Dragon:G.a,Sword:$.a,Staff:K.a,Bow:T.a,Armor:F.a,Gauntlets:N.a,Helm:V.a,Coin:Y.a,Open:ee.a,InvSword:ne.a,InvStaff:ie.a,InvBow:ce.a,InvArmor:de.a,InvGauntlets:pe.a,InvHelm:le.a,InvCoin:me.a},ve={props:["card"],computed:{flipped:function(){return this.card.flipped},safe:function(){return this.card.safe},inv:function(){return this.card.inv},boss:function(){return"boss"===this.card.type},descend:function(){return"descend"===this.card.id},engaged:function(){return!!g.state.engaged&&this.card.id===g.state.engaged.id},pos:function(){if(void 0!==this.card.x&&void 0!==this.card.y){var e=k(this.card.x,this.card.y);return{left:"".concat(e.x,"px"),top:"".concat(e.y,"px")}}return{}},frontImage:function(){return this.card.inv?{backgroundImage:"url(".concat(ge["Inv"+this.card.name],")")}:{backgroundImage:"url(".concat(ge[this.card.name],")")}},backImage:function(){if(!this.card.inv)return{backgroundImage:"url(".concat(ee.a,")")}}}},he=ve,ye=(n("a3d0"),n("95c6")),be=Object(ye["a"])(he,b,w,!1,null,"151f14ce",null),we=be.exports,xe=n("2be3"),ke=n.n(xe);window.map={width:5e3,height:5e3},window.recenter=function(){var e=document.querySelector(".map-inner");e.style.width=window.map.width+"px",e.style.height=window.map.height+"px",document.querySelector(".map").scrollTo(window.map.width/2-window.innerWidth/2,window.map.height/2-window.innerHeight/2)};var Se={components:{Card:we},mounted:function(){window.recenter()},computed:{map:function(){return g.state.map},wood:function(){return{backgroundImage:"url(".concat(ke.a,")")}}},methods:{click:function(e,t){if(t.flipped)return!1;if(g.state.engaged&&g.state.engaged.id===t.id)return!1;var n=t.strength;if(n)g.commit("roll"),g.state.die>=n?(g.commit({type:"flip",card:t}),g.commit("explore"),"boss"===t.type&&g.commit("flip",{card:g.state.inv.key})):(g.commit({type:"setStrength",strength:n}),g.commit("forceHUD"),g.commit({type:"engage",card:t}));else if("item"===t.type){var a=g.state.inv[t.id];a&&a.flipped&&(g.commit({type:"flip",card:t}),g.commit({type:"flip",card:a}))}else if("Wall"===t.name){g.commit({type:"flip",card:t}),g.commit("explore");var i=Math.floor(6*Math.random())+1,r=["sword","staff","bow","armor","helm","gauntlets"],c=r[i-1];g.state.inv[c].flipped?g.commit({type:"discard",card:g.state.inv[c]}):g.commit({type:"flip",card:g.state.inv[c]})}else"Shop"===t.name?g.state.inv.coin.flipped||(g.commit({type:"flip",card:g.state.inv.coin}),g.commit("forceHUD"),g.commit("startShopping")):"descend"!==t.id||g.state.inv.key.flipped||g.dispatch("descend")}}},_e=Se,Ce=(n("667a"),Object(ye["a"])(_e,h,y,!1,null,"0625a06c",null)),De=Ce.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"HUD"},[e.die?n("div",{staticClass:"die"},[e._v(e._s(e.die))]):e._e(),n("div",{staticClass:"remaining"},[n("span",[e._v(e._s(e.remaining)+" / "+e._s(e.total))]),n("span",{staticClass:"floor"},[e._v("Floor "+e._s(e.floor))])]),n("div",{staticClass:"cards",class:{force:e.forceHUD}},[n("div",{staticClass:"group left"},[e.inv.sword.discarded?e._e():n("Card",{attrs:{card:e.inv.sword},on:{click:e.click}}),e.inv.staff.discarded?e._e():n("Card",{attrs:{card:e.inv.staff},on:{click:e.click}}),e.inv.bow.discarded?e._e():n("Card",{attrs:{card:e.inv.bow},on:{click:e.click}})],1),n("div",{staticClass:"group middle"},[e.inv.armor.discarded?e._e():n("Card",{attrs:{card:e.inv.armor},on:{click:e.click}}),e.inv.helm.discarded?e._e():n("Card",{attrs:{card:e.inv.helm},on:{click:e.click}}),e.inv.gauntlets.discarded?e._e():n("Card",{attrs:{card:e.inv.gauntlets},on:{click:e.click}})],1),n("div",{staticClass:"group right"},[n("Card",{attrs:{card:e.inv.coin},on:{click:e.click}}),n("Card",{attrs:{card:e.inv.key},on:{click:e.click}})],1)])])},He=[],je={components:{Card:we},methods:{click:function(e,t){g.state.shopping?t.flipped&&"Key"!==t.name&&(g.commit({type:"flip",card:t}),g.commit("stopShopping"),g.commit("releaseHUD")):g.state.forceHUD&&(t.flipped?"Coin"!==t.name&&"Key"!==t.name&&(g.commit({type:"discard",card:t}),g.commit("releaseHUD"),g.commit("engage",{card:null}),g.commit({type:"setStrength",requiredStrength:0})):(g.commit({type:"flip",card:t}),"armor"===t.type?(g.commit("releaseHUD"),g.commit("engage",{card:null}),g.commit({type:"setStrength",requiredStrength:0})):"weapon"===t.type&&(g.commit("increaseDie"),g.state.die>=g.state.requiredStrength&&(g.commit({type:"setStrength",requiredStrength:0}),g.commit({type:"flip",card:g.state.engaged}),g.commit("releaseHUD"),g.commit("explore"),"boss"===g.state.engaged.type&&g.commit("flip",{card:g.state.inv.key}),g.commit("engage",{card:null})))))}},computed:{inv:function(){return g.state.inv},strength:function(){return g.state.requiredStrength},floor:function(){return g.state.floor},remaining:function(){return g.state.deck.length},total:function(){return g.state.deckSize},forceHUD:function(){return g.state.forceHUD},die:function(){return g.state.die}}},Ie=je,Ue=(n("5c66"),Object(ye["a"])(Ie,Oe,He,!1,null,"f75835f8",null)),Ee=Ue.exports;g.commit("shuffle"),g.commit("explore");var Me={components:{Map:De,HUD:Ee}},qe=Me,Pe=(n("034f"),Object(ye["a"])(qe,a,i,!1,null,null,null));t["a"]=Pe.exports},"42d2":function(e,t,n){e.exports=n.p+"img/InvCoin.7bfe2ac2.png"},"44bb":function(e,t,n){e.exports=n.p+"img/Dragon.db0e4d44.png"},4709:function(e,t,n){e.exports=n.p+"img/InvSword.26ad09da.png"},"551e":function(e,t,n){e.exports=n.p+"img/Helm.fbd1e333.png"},"5c66":function(e,t,n){"use strict";var a=n("c9d4"),i=n.n(a);i.a},"65ca":function(e,t,n){e.exports=n.p+"img/InvStaff.b7c7e999.png"},"667a":function(e,t,n){"use strict";var a=n("b363"),i=n.n(a);i.a},"6aef":function(e,t,n){e.exports=n.p+"img/Armor.d916f67d.png"},7785:function(e,t,n){e.exports=n.p+"img/InvGauntlets.fba8797f.png"},"79fe":function(e,t,n){e.exports=n.p+"img/Spider.becbcd09.png"},"8b13":function(e,t,n){e.exports=n.p+"img/Entrance.07882ae7.png"},"8f62":function(e,t,n){e.exports=n.p+"img/InvHelm.08ade446.png"},a3d0:function(e,t,n){"use strict";var a=n("04ee"),i=n.n(a);i.a},abae:function(e,t,n){e.exports=n.p+"img/Wall.975a122a.png"},acd6:function(e,t,n){e.exports=n.p+"img/Bow.894bfb4d.png"},b363:function(e,t,n){},c9d4:function(e,t,n){},d301:function(e,t,n){e.exports=n.p+"img/InvArmor.77b04f22.png"},d803:function(e,t,n){e.exports=n.p+"img/Snake.8353d8e9.png"},df1a:function(e,t,n){e.exports=n.p+"img/Shop.29cbf800.png"},e6d4:function(e,t,n){},eaed:function(e,t,n){e.exports=n.p+"img/Coin.b5813e62.png"},f48e:function(e,t,n){e.exports=n.p+"img/Gauntlets.285226b8.png"},f9e9:function(e,t,n){e.exports=n.p+"img/Sword.f5db9640.png"},fea3:function(e,t,n){e.exports=n.p+"img/Rat.4a84733b.png"}});
//# sourceMappingURL=app.310b0c55.js.map