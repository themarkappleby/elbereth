(function(e){function t(t){for(var a,o,c=t[0],s=t[1],d=t[2],f=0,l=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&l.push(i[o][0]),i[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);p&&p(t);while(l.length)l.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/elbereth/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("6868")},"034f":function(e,t,n){"use strict";var a=n("e6d4"),i=n.n(a);i.a},"067d":function(e,t,n){e.exports=n.p+"img/InvNoCoin.c011d9bb.png"},"1f69":function(e,t,n){"use strict";var a=n("9e69"),i=n.n(a);i.a},"217a":function(e,t,n){e.exports=n.p+"img/Open.80f2237f.png"},"22c7":function(e,t,n){e.exports=n.p+"img/InvNoHelm.c51f2cfa.png"},"2be3":function(e,t,n){e.exports=n.p+"img/wood.6ca97484.jpg"},"30ad":function(e,t,n){e.exports=n.p+"img/Staff.23929926.png"},"30e8":function(e,t,n){e.exports=n.p+"img/InvNoArmor.a965b034.png"},3119:function(e,t,n){e.exports=n.p+"img/InvBow.9de84706.png"},3794:function(e,t,n){"use strict";var a=n("9828"),i=n.n(a);i.a},"3d57":function(e,t,n){e.exports=n.p+"img/Descend.3ee5a890.png"},"3dfd":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Map"),n("HUD")],1)},i=[],r=(n("9eec"),n("04ca"),n("fc30"),n("4dc8"),n("8dcc"),n("aa12"),n("4809"),n("e821")),o=n("bd56"),c=n("3777"),s=n("2f62");function d(e){var t=[];e.map.forEach((function(n){(n.safe||n.flipped)&&[[n.x,n.y-1],[n.x,n.y+1],[n.x-1,n.y],[n.x+1,n.y]].forEach((function(n,a){f(n[0],n[1],e.map)||p(n[0],n[1],a,e)&&t.push(n)}))})),t.length&&d(e)}function p(e,t,n,a){if(a.deck.length){var i=a.deck.pop();if(i)return i.x=e,i.y=t,a.map.push(i),!0}return!1}function f(e,t,n){var a=null;return n.forEach((function(n){e===n.x&&t===n.y&&(a=n)})),a}c["a"].use(s["a"]);var l={name:"Entrance",id:"entrance",safe:!0,x:0,y:0,flipped:!1},u={name:"Descend",id:"descend",safe:!0,flipped:!1,x:1,y:0},m={name:"Dragon",id:"dragon",strength:6,type:"boss",flipped:!1,safe:!1,x:0,y:0},g=[u,m].concat(Object(o["a"])(h("Rat",12,{safe:!1,strength:3})),Object(o["a"])(h("Spider",12,{safe:!1,strength:4})),Object(o["a"])(h("Snake",12,{safe:!1,strength:5})),Object(o["a"])(h("Wall",15,{safe:!1})),Object(o["a"])(h("Shop",3,{safe:!0})),Object(o["a"])(h("Coin",3,{safe:!0,flipped:!1,type:"item",x:0,y:0})),[{name:"Sword",id:"sword",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Staff",id:"staff",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Bow",id:"bow",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Helm",id:"helm",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Gauntlets",id:"gauntlets",safe:!0,flipped:!1,type:"item",x:0,y:0},{name:"Armor",id:"armor",safe:!0,flipped:!1,type:"item",x:0,y:0}]),v=new s["a"].Store({state:{die:0,floor:1,forceHUD:!1,requiredStrength:0,engaged:null,shopping:!1,map:[l],deck:g,inv:{sword:{name:"Sword",type:"weapon",inv:!0,flipped:!1,discarded:!1},staff:{name:"Staff",type:"weapon",inv:!0,flipped:!0,discarded:!1},bow:{name:"Bow",type:"weapon",inv:!0,flipped:!0,discarded:!1},armor:{name:"Armor",type:"armor",inv:!0,flipped:!1,discarded:!1},gauntlets:{name:"Gauntlets",type:"armor",inv:!0,flipped:!0,discarded:!1},helm:{name:"Helm",type:"armor",inv:!0,flipped:!0,discarded:!1},coin:{name:"Coin",inv:!0,flipped:!0},key:{name:"Key",inv:!0,flipped:!0}}},mutations:{shuffle:function(e){for(var t=e.deck.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e.deck[n],e.deck[t]];e.deck[t]=a[0],e.deck[n]=a[1]}},explore:function(e){d(e)},setStrength:function(e,t){e.requiredStrength=t.strength},forceHUD:function(e){e.forceHUD=!0},releaseHUD:function(e){e.forceHUD=!1},startShopping:function(e){e.shopping=!0},stopShopping:function(e){e.shopping=!1},engage:function(e,t){e.engaged=t.card},flip:function(e,t){t.card.flipped=!t.card.flipped},roll:function(e){e.die=Math.floor(6*Math.random())+1},increaseDie:function(e){e.die+=1},discard:function(e,t){t.card.discarded=!0}},actions:{descend:function(e){var t=e.commit,n=e.state;n.inv.key.flipped=!0,n.map=n.map.filter((function(e){return"Entrance"!==e.name&&"Descend"!==e.name&&"boss"!==e.type})),n.deck=n.deck.filter((function(e){return"Entrance"!==e.name&&"Descend"!==e.name&&"boss"!==e.type})),n.deck=[].concat(Object(o["a"])(n.deck),Object(o["a"])(n.map)),t("shuffle"),n.deck=[].concat(Object(o["a"])(n.deck.splice(7)),[m,u]),t("shuffle"),n.deck.forEach((function(e){e.x=0,e.y=0,e.flipped=!1})),n.map=[l],n.floor+=1,window.recenter(),t("explore")}}});function h(e,t,n){for(var a=[],i=1;i<=t;i++)a.push(Object(r["a"])({name:e,flipped:!1,id:"".concat(e,"-").concat(i),safe:!1,x:0,y:0},n));return a}var y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map"},[n("div",{staticClass:"map-inner",style:e.wood},e._l(e.map,(function(t){return n("Card",{key:t.id,attrs:{card:t},on:{click:e.click}})})),1)])},b=[],w=(n("2cff"),n("9cb7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"card",staticClass:"card",class:{flipped:e.flipped,safe:e.safe,inv:e.inv,engaged:e.engaged,boss:e.boss,descend:e.descend},style:e.pos,on:{click:function(t){return e.$emit("click",t,e.card)}}},[n("div",{staticClass:"card-front",style:e.frontImage},[n("Die",{attrs:{value:e.card.strength,size:"small"}})],1),n("div",{staticClass:"card-back",style:e.backImage})])}),x=[];function k(e,t,n,a){var i=window.map.width/2,r=window.map.height/2,o=8;return{x:i+e*(n+o),y:r+t*(a+o)}}var S=k,C=n("8b13"),I=n.n(C),D=n("3d57"),H=n.n(D),O=n("df1a"),_=n.n(O),j=n("abae"),U=n.n(j),E=n("fea3"),N=n.n(E),M=n("79fe"),A=n.n(M),q=n("d803"),B=n.n(q),G=n("44bb"),T=n.n(G),W=n("f9e9"),$=n.n(W),P=n("30ad"),z=n.n(P),K=n("acd6"),L=n.n(K),R=n("6aef"),Y=n.n(R),J=n("f48e"),F=n.n(J),Q=n("551e"),V=n.n(Q),X=n("eaed"),Z=n.n(X),ee=n("217a"),te=n.n(ee),ne=n("4709"),ae=n.n(ne),ie=n("65ca"),re=n.n(ie),oe=n("3119"),ce=n.n(oe),se=n("d301"),de=n.n(se),pe=n("7785"),fe=n.n(pe),le=n("8f62"),ue=n.n(le),me=n("42d2"),ge=n.n(me),ve=n("df67"),he=n.n(ve),ye=n("64d7"),be=n.n(ye),we=n("f350"),xe=n.n(we),ke=n("30e8"),Se=n.n(ke),Ce=n("cf47"),Ie=n.n(Ce),De=n("22c7"),He=n.n(De),Oe=n("067d"),_e=n.n(Oe),je={Entrance:I.a,Descend:H.a,Shop:_.a,Wall:U.a,Rat:N.a,Spider:A.a,Snake:B.a,Dragon:T.a,Sword:$.a,Staff:z.a,Bow:L.a,Armor:Y.a,Gauntlets:F.a,Helm:V.a,Coin:Z.a,Open:te.a,InvSword:ae.a,InvStaff:re.a,InvBow:ce.a,InvArmor:de.a,InvGauntlets:fe.a,InvHelm:ue.a,InvCoin:ge.a,InvNoSword:he.a,InvNoStaff:be.a,InvNoBow:xe.a,InvNoGauntlets:Ie.a,InvNoHelm:He.a,InvNoCoin:_e.a,InvNoArmor:Se.a},Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.value?n("div",{staticClass:"die",class:e.dieClass},[n("span",{staticClass:"pip"}),n("span",{staticClass:"pip"}),n("span",{staticClass:"pip"}),n("span",{staticClass:"pip"}),n("span",{staticClass:"pip"}),n("span",{staticClass:"pip"})]):e._e()},Ee=[],Ne={props:["value","size"],computed:{dieClass:function(){var e={};return e["die-".concat(this.value)]=!0,this.size&&(e["die-".concat(this.size)]=!0),e}}},Me=Ne,Ae=(n("1f69"),n("95c6")),qe=Object(Ae["a"])(Me,Ue,Ee,!1,null,"6fde5a48",null),Be=qe.exports,Ge={components:{Die:Be},props:["card"],data:function(){return{pos:{}}},mounted:function(){if(void 0!==this.card.x&&void 0!==this.card.y){var e=this.$refs.card.clientWidth,t=this.$refs.card.clientHeight,n=S(this.card.x,this.card.y,e,t);this.pos={left:"".concat(n.x,"px"),top:"".concat(n.y,"px"),marginLeft:"-".concat(e/2,"px"),marginTop:"-".concat(t/2,"px")}}},computed:{flipped:function(){return this.card.flipped},safe:function(){return this.card.safe},inv:function(){return this.card.inv},boss:function(){return"boss"===this.card.type},descend:function(){return"descend"===this.card.id},engaged:function(){return!!v.state.engaged&&this.card.id===v.state.engaged.id},frontImage:function(){return this.card.inv?{backgroundImage:"url(".concat(je["Inv"+this.card.name],")")}:{backgroundImage:"url(".concat(je[this.card.name],")")}},backImage:function(){return this.card.inv?{backgroundImage:"url(".concat(je["InvNo"+this.card.name],")")}:{backgroundImage:"url(".concat(je.Open,")")}}}},Te=Ge,We=(n("3794"),Object(Ae["a"])(Te,w,x,!1,null,"1d2acec8",null)),$e=We.exports,Pe=n("2be3"),ze=n.n(Pe);window.map={width:5e3,height:5e3},window.recenter=function(){var e=document.querySelector(".map-inner");e.style.width=window.map.width+"px",e.style.height=window.map.height+"px",document.querySelector(".map").scrollTo(window.map.width/2-window.innerWidth/2,window.map.height/2-window.innerHeight/2+50)};var Ke={components:{Card:$e},mounted:function(){window.recenter()},computed:{map:function(){return v.state.map},wood:function(){return{backgroundImage:"url(".concat(ze.a,")")}}},methods:{click:function(e,t){if(t.flipped)return!1;if(v.state.forceHUD)return!1;if(v.state.engaged&&v.state.engaged.id===t.id)return!1;var n=t.strength;if(n)v.commit("roll"),v.state.die>=n?(v.commit({type:"flip",card:t}),v.commit("explore"),"boss"===t.type&&(v.commit("flip",{card:v.state.inv.key}),7===v.state.floor&&window.setTimeout((function(){alert("Congratulations! You Won!"),window.location.reload()}),500))):(v.commit({type:"setStrength",strength:n}),v.commit("forceHUD"),v.commit({type:"engage",card:t}),Le(v.state.inv)&&window.setTimeout((function(){alert("You Lose. Try Again."),window.location.reload()}),500));else if("item"===t.type){var a=v.state.inv[t.name.toLowerCase()];a&&a.flipped&&(v.commit({type:"flip",card:t}),v.commit({type:"flip",card:a}))}else if("Wall"===t.name){v.commit({type:"flip",card:t}),v.commit("explore");var i=Math.floor(6*Math.random())+1,r=["sword","staff","bow","armor","helm","gauntlets"],o=r[i-1];v.state.inv[o].flipped?v.commit({type:"discard",card:v.state.inv[o]}):v.commit({type:"flip",card:v.state.inv[o]})}else"Shop"===t.name?v.state.inv.coin.flipped||(v.commit({type:"flip",card:v.state.inv.coin}),v.commit("forceHUD"),v.commit("startShopping")):"descend"!==t.id||v.state.inv.key.flipped||v.dispatch("descend")}}};function Le(e){var t=!0;return Object.keys(e).forEach((function(n){!1===e[n].discarded&&(t=!1)})),t}var Re=Ke,Ye=(n("c723"),Object(Ae["a"])(Re,y,b,!1,null,"cd04af02",null)),Je=Ye.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"HUD"},[n("Die",{attrs:{value:e.die}}),n("div",{staticClass:"remaining"},[n("div",{staticClass:"remaining-floor"},[e._v(" Floor "+e._s(e.floor)+" of "+e._s(e.floors)+" ")]),n("div",{staticClass:"remaining-cards"},[e._v(" Cards "+e._s(e.seenCards)+" of "+e._s(e.totalCards)+" ")])]),n("div",{staticClass:"overlay",class:{force:e.forceHUD}}),n("div",{staticClass:"cards",class:{force:e.forceHUD}},[e.inv.sword.discarded?e._e():n("Card",{attrs:{card:e.inv.sword},on:{click:e.click}}),e.inv.staff.discarded?e._e():n("Card",{attrs:{card:e.inv.staff},on:{click:e.click}}),e.inv.bow.discarded?e._e():n("Card",{attrs:{card:e.inv.bow},on:{click:e.click}}),e.inv.armor.discarded?e._e():n("Card",{attrs:{card:e.inv.armor},on:{click:e.click}}),e.inv.helm.discarded?e._e():n("Card",{attrs:{card:e.inv.helm},on:{click:e.click}}),e.inv.gauntlets.discarded?e._e():n("Card",{attrs:{card:e.inv.gauntlets},on:{click:e.click}}),n("Card",{attrs:{card:e.inv.coin},on:{click:e.click}}),n("Card",{attrs:{card:e.inv.key},on:{click:e.click}})],1)],1)},Qe=[],Ve={components:{Card:$e,Die:Be},methods:{click:function(e,t){v.state.shopping?t.flipped&&"Key"!==t.name&&(v.commit({type:"flip",card:t}),v.commit("stopShopping"),v.commit("releaseHUD")):v.state.forceHUD&&(t.flipped?"Coin"!==t.name&&"Key"!==t.name&&(v.commit({type:"discard",card:t}),v.commit("releaseHUD"),v.commit("engage",{card:null}),v.commit({type:"setStrength",requiredStrength:0})):(v.commit({type:"flip",card:t}),"armor"===t.type?(v.commit("releaseHUD"),v.commit("engage",{card:null}),v.commit({type:"setStrength",requiredStrength:0})):"weapon"===t.type&&(v.commit("increaseDie"),v.state.die>=v.state.requiredStrength&&(v.commit({type:"setStrength",requiredStrength:0}),v.commit({type:"flip",card:v.state.engaged}),v.commit("releaseHUD"),v.commit("explore"),"boss"===v.state.engaged.type&&(v.commit("flip",{card:v.state.inv.key}),7===v.state.floor&&window.setTimeout((function(){alert("Congratulations! You Won!"),window.location.reload()}),500)),v.commit("engage",{card:null})))))}},data:function(){return{floors:(v.state.deck.length+v.state.map.length-3)/7+1}},computed:{inv:function(){return v.state.inv},floor:function(){return v.state.floor},seenCards:function(){return v.state.map.length},totalCards:function(){return v.state.deck.length+v.state.map.length},forceHUD:function(){return v.state.forceHUD},die:function(){return v.state.die}}},Xe=Ve,Ze=(n("e23b"),Object(Ae["a"])(Xe,Fe,Qe,!1,null,"bbe2bcf6",null)),et=Ze.exports;v.commit("shuffle"),v.commit("explore");var tt={components:{Map:Je,HUD:et}},nt=tt,at=(n("034f"),Object(Ae["a"])(nt,a,i,!1,null,null,null));t["a"]=at.exports},"42d2":function(e,t,n){e.exports=n.p+"img/InvCoin.7bfe2ac2.png"},"44bb":function(e,t,n){e.exports=n.p+"img/Dragon.db0e4d44.png"},4709:function(e,t,n){e.exports=n.p+"img/InvSword.26ad09da.png"},"551e":function(e,t,n){e.exports=n.p+"img/Helm.fbd1e333.png"},"64d7":function(e,t,n){e.exports=n.p+"img/InvNoStaff.095c2dfd.png"},"65ca":function(e,t,n){e.exports=n.p+"img/InvStaff.b7c7e999.png"},"6aef":function(e,t,n){e.exports=n.p+"img/Armor.d916f67d.png"},7785:function(e,t,n){e.exports=n.p+"img/InvGauntlets.fba8797f.png"},"79fe":function(e,t,n){e.exports=n.p+"img/Spider.becbcd09.png"},"8b13":function(e,t,n){e.exports=n.p+"img/Entrance.07882ae7.png"},"8f62":function(e,t,n){e.exports=n.p+"img/InvHelm.08ade446.png"},9828:function(e,t,n){},"9e69":function(e,t,n){},abae:function(e,t,n){e.exports=n.p+"img/Wall.975a122a.png"},acd6:function(e,t,n){e.exports=n.p+"img/Bow.894bfb4d.png"},c723:function(e,t,n){"use strict";var a=n("d256"),i=n.n(a);i.a},cf47:function(e,t,n){e.exports=n.p+"img/InvNoGauntlets.b0045ce9.png"},d256:function(e,t,n){},d301:function(e,t,n){e.exports=n.p+"img/InvArmor.77b04f22.png"},d803:function(e,t,n){e.exports=n.p+"img/Snake.8353d8e9.png"},df1a:function(e,t,n){e.exports=n.p+"img/Shop.29cbf800.png"},df67:function(e,t,n){e.exports=n.p+"img/InvNoSword.df02dca5.png"},e23b:function(e,t,n){"use strict";var a=n("f811"),i=n.n(a);i.a},e6d4:function(e,t,n){},eaed:function(e,t,n){e.exports=n.p+"img/Coin.b5813e62.png"},f350:function(e,t,n){e.exports=n.p+"img/InvNoBow.058a16f3.png"},f48e:function(e,t,n){e.exports=n.p+"img/Gauntlets.285226b8.png"},f811:function(e,t,n){},f9e9:function(e,t,n){e.exports=n.p+"img/Sword.f5db9640.png"},fea3:function(e,t,n){e.exports=n.p+"img/Rat.4a84733b.png"}});
//# sourceMappingURL=app.b110d7f8.js.map